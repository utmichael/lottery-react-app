{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\micka\\\\Desktop\\\\Crypto Project\\\\lottery-react-app\\\\src\\\\App.js\";\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport Web3 from 'web3';\nimport { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar web3 = new Web3(Web3.givenProvider || \"ws://localhost:7545\");\nlet lotteryAddress = '0x69bF039ED3c1Be51a491B77855245735faa7C365';\nlet lotteryABI = [{\n  \"inputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"constructor\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"BET\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"answer\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"DRAW\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"answer\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"FAIL\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"REFUND\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"answer\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"WIN\",\n  \"type\": \"event\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"answerForTest\",\n  \"outputs\": [{\n    \"internalType\": \"bytes32\",\n    \"name\": \"\",\n    \"type\": \"bytes32\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"owner\",\n  \"outputs\": [{\n    \"internalType\": \"address payable\",\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }],\n  \"name\": \"betAndDistribute\",\n  \"outputs\": [{\n    \"internalType\": \"bool\",\n    \"name\": \"result\",\n    \"type\": \"bool\"\n  }],\n  \"payable\": true,\n  \"stateMutability\": \"payable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"getPot\",\n  \"outputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"pot\",\n    \"type\": \"uint256\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }],\n  \"name\": \"bet\",\n  \"outputs\": [{\n    \"internalType\": \"bool\",\n    \"name\": \"result\",\n    \"type\": \"bool\"\n  }],\n  \"payable\": true,\n  \"stateMutability\": \"payable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [],\n  \"name\": \"distribute\",\n  \"outputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"internalType\": \"bytes32\",\n    \"name\": \"answer\",\n    \"type\": \"bytes32\"\n  }],\n  \"name\": \"setAnswerForTest\",\n  \"outputs\": [{\n    \"internalType\": \"bool\",\n    \"name\": \"result\",\n    \"type\": \"bool\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"internalType\": \"bytes32\",\n    \"name\": \"answer\",\n    \"type\": \"bytes32\"\n  }],\n  \"name\": \"isMatch\",\n  \"outputs\": [{\n    \"internalType\": \"enum Lottery.BettingResult\",\n    \"name\": \"\",\n    \"type\": \"uint8\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"pure\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"getBetInfo\",\n  \"outputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }, {\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}];\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.initWeb3 = async () => {\n      if (window.ethereum) {\n        window.web3 = new Web3(window.ethereum);\n\n        try {\n          // Request account access if needed\n          await window.ethereum.enable(); // Acccounts now exposed\n          // this.web3.eth.sendTransaction({/* ... */});\n        } catch (error) {\n          // User denied account access...\n          console.log(`User denied account access: ${error}`);\n        }\n      } // Legacy dapp browsers...\n      else if (window.web3) {\n        console.log('Legacy Mode');\n        window.web3 = new Web3(Web3.currentProvider); // Acccounts always exposed\n        // this.web3.eth.sendTransaction({/* ... */});\n      } // Non-dapp browsers...\n      else {\n        console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');\n      }\n\n      let accounts = await web3.eth.getAccounts();\n      let account = accounts[0]; // console.log(account);\n\n      this.lotteryContract = new web3.eth.Contract(lotteryABI, lotteryAddress);\n      /*let pot = await this.lotteryContract.methods.getPot().call();\n      console.log(pot);\n      let owner = await this.lotteryContract.methods.owner().call();\n      console.log(owner);*/\n\n      lotteryContract.methods.betAndDistribute('0xcd').send({\n        from: account,\n        value: 5000000000000000,\n        gas: 300000\n      });\n    };\n\n    this.getBetEvents = async () => {\n      const records = [];\n      let events = await lotteryContract.getPastEvents('BET', {\n        fromBlock: 0,\n        toBlock: 'latest'\n      });\n      console.log(events);\n    };\n\n    this.bet = async () => {//let nonce = await web3.eth.getTransactionCount(account);\n      //this.lotteryContract.methods.betAndDistribute('0xcd').send({from: account, value:5000000000000000, gas: 300000})\n    };\n  }\n\n  async componentDidMount() {\n    await this.initWeb3();\n    await this.getBetEvents();\n    /*let account = await web3.eth.getAccounts();\n    console.log(account);\n    let balance = await web3.eth.getBalance(account[0]);\n    console.log(balance);*/\n    //let accounts = await this.web3.eth.getAccounts();\n    //console.log(accounts);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"App-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: logo,\n          className: \"App-logo\",\n          alt: \"logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Edit \", /*#__PURE__*/_jsxDEV(\"code\", {\n            children: \"src/App.js\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 18\n          }, this), \" and save to reload.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"App-link\",\n          href: \"https://reactjs.org\",\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          children: \"Learn React\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/micka/Desktop/Crypto Project/lottery-react-app/src/App.js"],"names":["Web3","Component","web3","givenProvider","lotteryAddress","lotteryABI","App","initWeb3","window","ethereum","enable","error","console","log","currentProvider","accounts","eth","getAccounts","account","lotteryContract","Contract","methods","betAndDistribute","send","from","value","gas","getBetEvents","records","events","getPastEvents","fromBlock","toBlock","bet","componentDidMount","render","logo"],"mappings":"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","sourcesContent":["import logo from './logo.svg';\nimport './App.css';\nimport Web3 from 'web3';\nimport { Component } from 'react';\nvar web3 = new Web3(Web3.givenProvider || \"ws://localhost:7545\");\n\nlet lotteryAddress = '0x69bF039ED3c1Be51a491B77855245735faa7C365'\nlet lotteryABI =[ { \"inputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"constructor\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"BET\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"answer\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"DRAW\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"answer\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"FAIL\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"REFUND\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"answer\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"WIN\", \"type\": \"event\" }, { \"constant\": true, \"inputs\": [], \"name\": \"answerForTest\", \"outputs\": [ { \"internalType\": \"bytes32\", \"name\": \"\", \"type\": \"bytes32\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"owner\", \"outputs\": [ { \"internalType\": \"address payable\", \"name\": \"\", \"type\": \"address\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" } ], \"name\": \"betAndDistribute\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"result\", \"type\": \"bool\" } ], \"payable\": true, \"stateMutability\": \"payable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"getPot\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"pot\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" } ], \"name\": \"bet\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"result\", \"type\": \"bool\" } ], \"payable\": true, \"stateMutability\": \"payable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [], \"name\": \"distribute\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"bytes32\", \"name\": \"answer\", \"type\": \"bytes32\" } ], \"name\": \"setAnswerForTest\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"result\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"internalType\": \"bytes32\", \"name\": \"answer\", \"type\": \"bytes32\" } ], \"name\": \"isMatch\", \"outputs\": [ { \"internalType\": \"enum Lottery.BettingResult\", \"name\": \"\", \"type\": \"uint8\" } ], \"payable\": false, \"stateMutability\": \"pure\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" } ], \"name\": \"getBetInfo\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" }, { \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" } ]\n\nclass App extends Component{\n  async componentDidMount (){\n    await this.initWeb3();\n    await this.getBetEvents();\n    /*let account = await web3.eth.getAccounts();\n    console.log(account);\n    let balance = await web3.eth.getBalance(account[0]);\n    console.log(balance);*/\n    //let accounts = await this.web3.eth.getAccounts();\n    //console.log(accounts);\n  }\n  initWeb3 = async () =>{\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n      try {\n          // Request account access if needed\n          await window.ethereum.enable();\n          // Acccounts now exposed\n          // this.web3.eth.sendTransaction({/* ... */});\n      } catch (error) {\n          // User denied account access...\n          console.log(`User denied account access: ${error}`)\n      }\n    }\n    // Legacy dapp browsers...\n    else if (window.web3) {\n        console.log('Legacy Mode')\n        window.web3 = new Web3(Web3.currentProvider);\n        // Acccounts always exposed\n        // this.web3.eth.sendTransaction({/* ... */});\n    }\n    // Non-dapp browsers...\n    else {\n        console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');\n    }\n    let accounts = await web3.eth.getAccounts();\n    let account = accounts[0];\n    // console.log(account);\n    this.lotteryContract = new web3.eth.Contract(lotteryABI,lotteryAddress);\n    /*let pot = await this.lotteryContract.methods.getPot().call();\n    console.log(pot);\n    let owner = await this.lotteryContract.methods.owner().call();\n    console.log(owner);*/\n    lotteryContract.methods.betAndDistribute('0xcd').send({from: account, value:5000000000000000, gas: 300000})\n  }\n  getBetEvents = async()=>{\n    const records = [];\n    let events = await lotteryContract.getPastEvents('BET',{fromBlock:0, toBlock:'latest'});\n    console.log(events);\n  }\n  \n  bet = async()=>{\n    //let nonce = await web3.eth.getTransactionCount(account);\n    //this.lotteryContract.methods.betAndDistribute('0xcd').send({from: account, value:5000000000000000, gas: 300000})\n  }\n\n  render(){\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <p>\n            Edit <code>src/App.js</code> and save to reload.\n          </p>\n          <a\n            className=\"App-link\"\n            href=\"https://reactjs.org\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Learn React\n          </a>\n        </header>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}