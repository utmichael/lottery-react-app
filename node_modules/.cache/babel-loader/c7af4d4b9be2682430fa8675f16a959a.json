{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\micka\\\\Desktop\\\\Crypto Project\\\\lottery-react-app\\\\src\\\\App.js\";\nimport './App.css';\nimport Web3 from 'web3';\nimport { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar web3 = new Web3(Web3.givenProvider || \"ws://localhost:7545\");\nlet lotteryAddress = '0x917fD76007A10a3CB6B0b81C27900a5D004Dc675';\nlet lotteryABI = [{\n  \"inputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"constructor\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"BET\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"answer\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"DRAW\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"answer\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"FAIL\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"REFUND\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"answer\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"WIN\",\n  \"type\": \"event\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"answerForTest\",\n  \"outputs\": [{\n    \"internalType\": \"bytes32\",\n    \"name\": \"\",\n    \"type\": \"bytes32\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"owner\",\n  \"outputs\": [{\n    \"internalType\": \"address payable\",\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }],\n  \"name\": \"betAndDistribute\",\n  \"outputs\": [{\n    \"internalType\": \"bool\",\n    \"name\": \"result\",\n    \"type\": \"bool\"\n  }],\n  \"payable\": true,\n  \"stateMutability\": \"payable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"getPot\",\n  \"outputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"_pot\",\n    \"type\": \"uint256\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }],\n  \"name\": \"bet\",\n  \"outputs\": [{\n    \"internalType\": \"bool\",\n    \"name\": \"result\",\n    \"type\": \"bool\"\n  }],\n  \"payable\": true,\n  \"stateMutability\": \"payable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [],\n  \"name\": \"distribute\",\n  \"outputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"internalType\": \"bytes32\",\n    \"name\": \"answer\",\n    \"type\": \"bytes32\"\n  }],\n  \"name\": \"setAnswerForTest\",\n  \"outputs\": [{\n    \"internalType\": \"bool\",\n    \"name\": \"result\",\n    \"type\": \"bool\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"internalType\": \"bytes32\",\n    \"name\": \"answer\",\n    \"type\": \"bytes32\"\n  }],\n  \"name\": \"isMatch\",\n  \"outputs\": [{\n    \"internalType\": \"enum Lottery.BettingResult\",\n    \"name\": \"\",\n    \"type\": \"uint8\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"pure\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"getBetInfo\",\n  \"outputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }, {\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}];\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.pollData = async () => {\n      await this.getPot();\n      await this.getBetEvents();\n      await this.getWinEvents();\n      await this.getFailEvents();\n      this.makeFinalRecords();\n    };\n\n    this.initWeb3 = async () => {\n      if (window.ethereum) {\n        window.web3 = new Web3(window.ethereum);\n\n        try {\n          // Request account access if needed\n          await window.ethereum.enable(); // Acccounts now exposed\n          // this.web3.eth.sendTransaction({/* ... */});\n        } catch (error) {\n          // User denied account access...\n          console.log(`User denied account access: ${error}`);\n        }\n      } // Legacy dapp browsers...\n      else if (window.web3) {\n        console.log('Legacy Mode');\n        window.web3 = new Web3(Web3.currentProvider); // Acccounts always exposed\n        // this.web3.eth.sendTransaction({/* ... */});\n      } // Non-dapp browsers...\n      else {\n        console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');\n      }\n\n      let accounts = await web3.eth.getAccounts();\n      this.account = accounts[0];\n      this.lotteryContract = new web3.eth.Contract(lotteryABI, lotteryAddress);\n      let owner = await this.lotteryContract.methods.owner().call(); // to test, bet 0.05 eth\n      //this.lotteryContract.methods.betAndDistribute('0xcd').send({from: this.account, value:5000000000000000, gas: 300000})\n    };\n\n    this.getPot = async () => {\n      let pot = await this.lotteryContract.methods.getPot().call();\n      console.log(pot);\n      let potString = web3.utils.fromWei(pot.toString(), 'ether');\n      console.log(potString);\n      this.setState({\n        pot: potString\n      });\n    };\n\n    this.getBetEvents = async () => {\n      const records = [];\n      let events = await this.lotteryContract.getPastEvents('BET', {\n        fromBlock: 0,\n        toBlock: 'latest'\n      });\n\n      for (let i = 0; i < events.length; i++) {\n        const record = {};\n        record.index = parseInt(events[i].returnValues.index, 10).toString();\n        record.bettor = events[i].returnValues.bettor;\n        record.betBlockNumber = events[i].blockNumber;\n        record.targetBlockNumber = events[i].returnValues.answerBlockNumber.toString();\n        record.challenges = events[i].returnValues.challenges;\n        record.win = \"Not Revealed\";\n        record.answer = '0x00';\n        records.unshift(record);\n      }\n\n      this.setState({\n        betRecords: records\n      }); // console.log(records);\n    };\n\n    this.getFailEvents = async () => {\n      const records = [];\n      let events = await this.lotteryContract.getPastEvents('FAIL', {\n        fromBlock: 0,\n        toBlock: 'latest'\n      });\n\n      for (let i = 0; i < events.length; i++) {\n        const record = {};\n        record.index = parseInt(events[i].returnValues.index, 10).toString();\n        record.answer = events[i].returnValues.answer;\n        records.unshift(record);\n      }\n\n      this.setState({\n        failRecords: records\n      }); // console.log(records);\n    };\n\n    this.getWinEvents = async () => {\n      const records = [];\n      let events = await this.lotteryContract.getPastEvents('WIN', {\n        fromBlock: 0,\n        toBlock: 'latest'\n      });\n\n      for (let i = 0; i < events.length; i++) {\n        const record = {};\n        record.index = parseInt(events[i].returnValues.index, 10).toString();\n        record.amount = parseInt(events[i].returnValues.amount, 10).toString();\n        records.unshift(record);\n      }\n\n      this.setState({\n        winRecords: records\n      }); // console.log(records);\n    };\n\n    this.makeFinalRecords = async () => {\n      let f = 0,\n          w = 0;\n      const records = [...this.state.betRecords];\n\n      for (let i = 0; i < this.state.betRecords.length; i += 1) {\n        for (let i = 0; i < this.state.betRecords.length; i += 1) {\n          console.log(this.state.winRecords.length);\n\n          if (this.state.winRecords.length > 0 && this.state.betRecords[i].index === this.state.winRecords[w].index) {\n            records[i].win = 'WIN';\n            records[i].answer = records[i].challenges;\n            records[i].pot = web3.utils.fromWei(this.state.winRecords[w].amount, 'ether');\n            if (this.state.winRecords.length - 1 > w) w++;\n          } else if (this.state.failRecords.length > 0 && this.state.betRecords[i].index === this.state.failRecords[f].index) {\n            records[i].win = 'FAIL';\n            records[i].answer = this.state.failRecords[f].answer;\n            records[i].pot = 0;\n            if (this.state.failRecords.length - 1 > f) f++;\n          } else {\n            records[i].answer = 'Not Revealed'; // let potAmount = await web3.eth.getTransactionFromBlock(records[i].betBlockNumber, records[i].index);\n\n            records[i].pot = this.state.pot;\n          }\n        }\n      }\n\n      this.setState({\n        finalRecords: records\n      });\n    };\n\n    this.bet = async () => {\n      let nonce = await web3.eth.getTransactionCount(this.account);\n      let challenges = '0x' + this.state.challenges[0].toLowerCase() + this.state.challenges[1].toLowerCase();\n      this.lotteryContract.methods.betAndDistribute(challenges).send({\n        from: this.account,\n        value: 5000000000000000,\n        gas: 300000,\n        nonce: nonce\n      }).on('transactionHash', hash => {\n        console.log(hash);\n      });\n    };\n\n    this.onClickCard = _Character => {\n      this.setState({\n        challenges: [this.state.challenges[1], _Character]\n      });\n    };\n\n    this.getCard = (_Character, _cardStyle) => {\n      let _card = '';\n\n      if (_Character === 'A') {\n        _card = 'ðŸ‚¡';\n      }\n\n      if (_Character === 'B') {\n        _card = 'ðŸ‚±';\n      }\n\n      if (_Character === 'C') {\n        _card = 'ðŸƒ';\n      }\n\n      if (_Character === 'D') {\n        _card = 'ðŸƒ‘';\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        className: _cardStyle,\n        onClick: () => {\n          this.onClickCard(_Character);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"card-text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"card-text text-center\",\n            style: {\n              fontSize: 300\n            },\n            children: _card\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"card-text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 7\n      }, this);\n    };\n\n    this.state = {\n      betRecords: [],\n      winRecords: [],\n      failRecords: [],\n      pot: '0',\n      challenges: ['A', 'B', 'C'],\n      finalRecords: [{\n        bettor: '0xabcd',\n        index: '0',\n        challenges: 'abc',\n        answer: 'ab',\n        targetBlockAnswer: '10',\n        pot: '0'\n      }]\n    };\n  }\n\n  async componentDidMount() {\n    await this.initWeb3();\n    await this.pollData();\n    /*let account = await web3.eth.getAccounts();\n    console.log(account);\n    let balance = await web3.eth.getBalance(account[0]);\n    console.log(balance);*/\n    //let accounts = await this.web3.eth.getAccounts();\n    //console.log(accounts);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jumbotron\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: [\"Current Pot : \", this.state.pot]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Lottery\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Your Bet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [this.state.challenges[0], \" \", this.state.challenges[1]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-group\",\n          children: [this.getCard('A', 'card bg-primary'), this.getCard('B', 'card bg-warning'), this.getCard('C', 'card bg-danger'), this.getCard('D', 'card bg-success')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-danger btn-lg\",\n          onClick: this.bet,\n          children: \"BET!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-dark table-striped\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Index\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Challenges\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Answer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Pot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Answer Block Number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: this.state.finalRecords.map((record, index) => {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: record.index\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: record.bettor\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: record.challenges\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: record.answer\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: record.pot\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: record.win\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: record.targetBlockAnswer\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 25\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/micka/Desktop/Crypto Project/lottery-react-app/src/App.js"],"names":["Web3","Component","web3","givenProvider","lotteryAddress","lotteryABI","App","constructor","props","pollData","getPot","getBetEvents","getWinEvents","getFailEvents","makeFinalRecords","initWeb3","window","ethereum","enable","error","console","log","currentProvider","accounts","eth","getAccounts","account","lotteryContract","Contract","owner","methods","call","pot","potString","utils","fromWei","toString","setState","records","events","getPastEvents","fromBlock","toBlock","i","length","record","index","parseInt","returnValues","bettor","betBlockNumber","blockNumber","targetBlockNumber","answerBlockNumber","challenges","win","answer","unshift","betRecords","failRecords","amount","winRecords","f","w","state","finalRecords","bet","nonce","getTransactionCount","toLowerCase","betAndDistribute","send","from","value","gas","on","hash","onClickCard","_Character","getCard","_cardStyle","_card","fontSize","targetBlockAnswer","componentDidMount","render","map"],"mappings":"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","sourcesContent":["import './App.css';\nimport Web3 from 'web3';\nimport { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.css'\n\nvar web3 = new Web3(Web3.givenProvider || \"ws://localhost:7545\");\n\nlet lotteryAddress = '0x917fD76007A10a3CB6B0b81C27900a5D004Dc675';\nlet lotteryABI =[ { \"inputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"constructor\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"BET\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"answer\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"DRAW\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"answer\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"FAIL\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"REFUND\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"answer\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"WIN\", \"type\": \"event\" }, { \"constant\": true, \"inputs\": [], \"name\": \"answerForTest\", \"outputs\": [ { \"internalType\": \"bytes32\", \"name\": \"\", \"type\": \"bytes32\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"owner\", \"outputs\": [ { \"internalType\": \"address payable\", \"name\": \"\", \"type\": \"address\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" } ], \"name\": \"betAndDistribute\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"result\", \"type\": \"bool\" } ], \"payable\": true, \"stateMutability\": \"payable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"getPot\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"_pot\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" } ], \"name\": \"bet\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"result\", \"type\": \"bool\" } ], \"payable\": true, \"stateMutability\": \"payable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [], \"name\": \"distribute\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"bytes32\", \"name\": \"answer\", \"type\": \"bytes32\" } ], \"name\": \"setAnswerForTest\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"result\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"internalType\": \"bytes32\", \"name\": \"answer\", \"type\": \"bytes32\" } ], \"name\": \"isMatch\", \"outputs\": [ { \"internalType\": \"enum Lottery.BettingResult\", \"name\": \"\", \"type\": \"uint8\" } ], \"payable\": false, \"stateMutability\": \"pure\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" } ], \"name\": \"getBetInfo\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" }, { \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" } ]\n\nclass App extends Component{\n\n  constructor(props){\n    super(props);\n\n    this.state={\n      betRecords:[],\n      winRecords:[],\n      failRecords:[],\n      pot:'0',\n      challenges:['A','B','C'],\n      finalRecords:[{\n        bettor:'0xabcd',\n        index:'0',\n        challenges:'abc',\n        answer:'ab',\n        targetBlockAnswer:'10',\n        pot:'0'\n      }]\n    }\n  }\n\n  async componentDidMount (){\n    await this.initWeb3();\n    await this.pollData();\n    /*let account = await web3.eth.getAccounts();\n    console.log(account);\n    let balance = await web3.eth.getBalance(account[0]);\n    console.log(balance);*/\n    //let accounts = await this.web3.eth.getAccounts();\n    //console.log(accounts);\n  }\n  pollData = async ()=>{\n    await this.getPot();\n    await this.getBetEvents();\n    await this.getWinEvents();\n    await this.getFailEvents();\n    this.makeFinalRecords();\n  }\n  initWeb3 = async () =>{\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n      try {\n          // Request account access if needed\n          await window.ethereum.enable();\n          // Acccounts now exposed\n          // this.web3.eth.sendTransaction({/* ... */});\n      } catch (error) {\n          // User denied account access...\n          console.log(`User denied account access: ${error}`)\n      }\n    }\n    // Legacy dapp browsers...\n    else if (window.web3) {\n        console.log('Legacy Mode')\n        window.web3 = new Web3(Web3.currentProvider);\n        // Acccounts always exposed\n        // this.web3.eth.sendTransaction({/* ... */});\n    }\n    // Non-dapp browsers...\n    else {\n        console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');\n    }\n    let accounts = await web3.eth.getAccounts();\n    this.account = accounts[0];\n    this.lotteryContract = new web3.eth.Contract(lotteryABI,lotteryAddress);\n    let owner = await this.lotteryContract.methods.owner().call();\n    // to test, bet 0.05 eth\n    //this.lotteryContract.methods.betAndDistribute('0xcd').send({from: this.account, value:5000000000000000, gas: 300000})\n  }\n  getPot = async()=>{\n    let pot = await this.lotteryContract.methods.getPot().call();\n    console.log(pot);\n    let potString = web3.utils.fromWei(pot.toString(), 'ether');\n    console.log(potString);\n    this.setState({pot:potString})\n  }\n\n  getBetEvents = async()=>{\n    const records = [];\n    let events = await this.lotteryContract.getPastEvents('BET',{fromBlock:0, toBlock:'latest'});\n    for (let i=0; i<events.length;i++){\n      const record={}\n      record.index = parseInt(events[i].returnValues.index, 10).toString();\n      record.bettor = events[i].returnValues.bettor;\n      record.betBlockNumber = events[i].blockNumber;\n      record.targetBlockNumber = events[i].returnValues.answerBlockNumber.toString();\n      record.challenges=events[i].returnValues.challenges;\n      record.win = \"Not Revealed\";\n      record.answer = '0x00'\n      records.unshift(record);\n    }\n    this.setState({betRecords:records})\n    // console.log(records);\n  }\n  getFailEvents = async()=>{\n    const records = [];\n    let events = await this.lotteryContract.getPastEvents('FAIL',{fromBlock:0, toBlock:'latest'});\n    for (let i=0; i<events.length;i++){\n      const record={}\n      record.index = parseInt(events[i].returnValues.index, 10).toString();\n      record.answer = events[i].returnValues.answer;\n      records.unshift(record);\n    }\n    this.setState({failRecords:records})\n    // console.log(records);\n  }\n  getWinEvents = async()=>{\n    const records = [];\n    let events = await this.lotteryContract.getPastEvents('WIN',{fromBlock:0, toBlock:'latest'});\n    for (let i=0; i<events.length;i++){\n      const record={}\n      record.index = parseInt(events[i].returnValues.index, 10).toString();\n      record.amount = parseInt(events[i].returnValues.amount, 10).toString();\n      records.unshift(record);\n    }\n    this.setState({winRecords:records})\n    // console.log(records);\n  }\n  makeFinalRecords = async()=>{\n    let f=0, w=0;\n    const records = [...this.state.betRecords];\n    for(let i=0;i<this.state.betRecords.length;i+=1){\n      for(let i=0;i<this.state.betRecords.length;i+=1) {\n        console.log(this.state.winRecords.length)\n        if(this.state.winRecords.length > 0 && this.state.betRecords[i].index === this.state.winRecords[w].index){\n          records[i].win = 'WIN'\n          records[i].answer = records[i].challenges;\n          records[i].pot = web3.utils.fromWei(this.state.winRecords[w].amount, 'ether');\n          if(this.state.winRecords.length - 1 > w) w++;\n  \n        } else if(this.state.failRecords.length > 0 && this.state.betRecords[i].index === this.state.failRecords[f].index){\n          \n          records[i].win = 'FAIL'\n          records[i].answer = this.state.failRecords[f].answer;\n          records[i].pot = 0;\n          if(this.state.failRecords.length - 1 > f) f++;\n  \n        } else {\n          records[i].answer = 'Not Revealed';\n          // let potAmount = await web3.eth.getTransactionFromBlock(records[i].betBlockNumber, records[i].index);\n          records[i].pot = this.state.pot;\n        }\n        \n      }\n      \n    }\n    this.setState({finalRecords:records})\n  }\n\n  bet = async()=>{\n    let nonce = await web3.eth.getTransactionCount(this.account);\n    let challenges = '0x'+this.state.challenges[0].toLowerCase()+this.state.challenges[1].toLowerCase();\n    this.lotteryContract.methods.betAndDistribute(challenges).send({from: this.account, value:5000000000000000, gas: 300000, nonce:nonce})\n    .on('transactionHash', (hash)=>{\n      console.log(hash)\n    })\n  }\n  onClickCard = (_Character)=>{\n    this.setState({\n      challenges:[this.state.challenges[1],_Character]\n    })\n  }\n  getCard = (_Character, _cardStyle)=>{\n    let _card = '';\n    if (_Character==='A'){\n      _card = 'ðŸ‚¡'\n    }\n    if (_Character==='B'){\n      _card = 'ðŸ‚±'\n    }\n    if (_Character==='C'){\n      _card = 'ðŸƒ'\n    }\n    if (_Character==='D'){\n      _card = 'ðŸƒ‘'\n    }\n\n    return (\n      <button className={_cardStyle} onClick={()=>{\n        this.onClickCard(_Character)\n      }}> \n        <div className='card-body text-center'>\n            <p className='card-text'></p>\n            <p className='card-text text-center' style={{fontSize:300}}>{_card}</p>\n            <p className='card-text'></p>\n        </div>\n      </button>\n    )\n  }\n\n  render(){\n      return (\n        <div className=\"App\">\n          {/* Header - Pot, Betting characters */}\n          <div className=\"container\">\n            <div className=\"jumbotron\">\n              <h1>Current Pot : {this.state.pot}</h1>\n              <p>Lottery</p>\n              <p>Your Bet</p>\n              <p>{this.state.challenges[0]} {this.state.challenges[1]}</p>\n            </div>\n          </div>\n          <div className='container'>\n            <div className='card-group'>\n              {this.getCard('A','card bg-primary')}\n              {this.getCard('B','card bg-warning')}\n              {this.getCard('C','card bg-danger')}\n              {this.getCard('D','card bg-success')}\n            </div> \n          </div>\n          <br></br>\n          <div>\n            <button className='btn btn-danger btn-lg' onClick={this.bet}>BET!</button>\n          </div>\n          <br></br>\n          <div className='container'>\n            <table className='table table-dark table-striped'>\n              <thead>\n                <tr>\n                  <th>Index</th>\n                  <th>Address</th>\n                  <th>Challenges</th>\n                  <th>Answer</th>\n                  <th>Pot</th>\n                  <th>Status</th>\n                  <th>Answer Block Number</th>\n                </tr>\n              </thead>\n              <tbody>\n                {\n                  this.state.finalRecords.map((record, index) => {\n                    return (\n                      <tr key={index}>\n                        <td>{record.index}</td>\n                        <td>{record.bettor}</td> \n                        <td>{record.challenges}</td>      \n                        <td>{record.answer}</td>      \n                        <td>{record.pot}</td>      \n                        <td>{record.win}</td>      \n                        <td>{record.targetBlockAnswer}</td>           \n                      </tr>\n                    )\n                  })\n                }\n              </tbody>\n            </table>\n          </div>\n        </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}