{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/micka/Desktop/Crypto Project/lottery-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/micka/Desktop/Crypto Project/lottery-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/micka/Desktop/Crypto Project/lottery-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/micka/Desktop/Crypto Project/lottery-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/micka/Desktop/Crypto Project/lottery-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/micka/Desktop/Crypto Project/lottery-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import'./App.css';import Web3 from'web3';import{Component}from'react';import'bootstrap/dist/css/bootstrap.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var web3=new Web3(Web3.givenProvider||\"ws://localhost:7545\");var lotteryAddress='0x69bF039ED3c1Be51a491B77855245735faa7C365';var lotteryABI=[{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"index\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"bettor\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bytes1\",\"name\":\"challenges\",\"type\":\"bytes1\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"answerBlockNumber\",\"type\":\"uint256\"}],\"name\":\"BET\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"index\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"bettor\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bytes1\",\"name\":\"challenges\",\"type\":\"bytes1\"},{\"indexed\":false,\"internalType\":\"bytes1\",\"name\":\"answer\",\"type\":\"bytes1\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"answerBlockNumber\",\"type\":\"uint256\"}],\"name\":\"DRAW\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"index\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"bettor\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bytes1\",\"name\":\"challenges\",\"type\":\"bytes1\"},{\"indexed\":false,\"internalType\":\"bytes1\",\"name\":\"answer\",\"type\":\"bytes1\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"answerBlockNumber\",\"type\":\"uint256\"}],\"name\":\"FAIL\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"index\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"bettor\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bytes1\",\"name\":\"challenges\",\"type\":\"bytes1\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"answerBlockNumber\",\"type\":\"uint256\"}],\"name\":\"REFUND\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"index\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"bettor\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bytes1\",\"name\":\"challenges\",\"type\":\"bytes1\"},{\"indexed\":false,\"internalType\":\"bytes1\",\"name\":\"answer\",\"type\":\"bytes1\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"answerBlockNumber\",\"type\":\"uint256\"}],\"name\":\"WIN\",\"type\":\"event\"},{\"constant\":true,\"inputs\":[],\"name\":\"answerForTest\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address payable\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes1\",\"name\":\"challenges\",\"type\":\"bytes1\"}],\"name\":\"betAndDistribute\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"result\",\"type\":\"bool\"}],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getPot\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"pot\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes1\",\"name\":\"challenges\",\"type\":\"bytes1\"}],\"name\":\"bet\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"result\",\"type\":\"bool\"}],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"distribute\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"answer\",\"type\":\"bytes32\"}],\"name\":\"setAnswerForTest\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"result\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"bytes1\",\"name\":\"challenges\",\"type\":\"bytes1\"},{\"internalType\":\"bytes32\",\"name\":\"answer\",\"type\":\"bytes32\"}],\"name\":\"isMatch\",\"outputs\":[{\"internalType\":\"enum Lottery.BettingResult\",\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"pure\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"index\",\"type\":\"uint256\"}],\"name\":\"getBetInfo\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"answerBlockNumber\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"bettor\",\"type\":\"address\"},{\"internalType\":\"bytes1\",\"name\":\"challenges\",\"type\":\"bytes1\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}];var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.pollData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.getPot();case 2:_context.next=4;return _this.getBetEvents();case 4:case\"end\":return _context.stop();}}},_callee);}));_this.initWeb3=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var accounts,owner;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!window.ethereum){_context2.next=12;break;}window.web3=new Web3(window.ethereum);_context2.prev=2;_context2.next=5;return window.ethereum.enable();case 5:_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](2);// User denied account access...\nconsole.log(\"User denied account access: \".concat(_context2.t0));case 10:_context2.next=13;break;case 12:if(window.web3){console.log('Legacy Mode');window.web3=new Web3(Web3.currentProvider);// Acccounts always exposed\n// this.web3.eth.sendTransaction({/* ... */});\n}// Non-dapp browsers...\nelse{console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');}case 13:_context2.next=15;return web3.eth.getAccounts();case 15:accounts=_context2.sent;_this.account=accounts[0];console.log(_this.account);_this.lotteryContract=new web3.eth.Contract(lotteryABI,lotteryAddress);_context2.next=21;return _this.lotteryContract.methods.owner().call();case 21:owner=_context2.sent;case 22:case\"end\":return _context2.stop();}}},_callee2,null,[[2,7]]);}));_this.getPot=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var pot,potString;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.lotteryContract.methods.getPot().call();case 2:pot=_context3.sent;potString=web3.utils.fromWei(pot.toString(),'ether');_this.setState({pot:potString});case 5:case\"end\":return _context3.stop();}}},_callee3);}));_this.getBetEvents=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var records,events,i,record;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:records=[];_context4.next=3;return _this.lotteryContract.getPastEvents('BET',{fromBlock:0,toBlock:'latest'});case 3:events=_context4.sent;for(i=0;i<events.length;i++){record={};record.index=parseInt(events[i].returnValues.index,10).toString();record.bettor=events[i].returnValues.bettor;record.betBlockNumber=events[i].blockNumber;record.targetBlockNumber=events[i].returnValues.answerBlockNumber.toString();record.challenges=events[i].returnValues.challenges;record.win=\"Not Revealed\";record.answer='0x00';records.unshift(record);}console.log(records);case 6:case\"end\":return _context4.stop();}}},_callee4);}));_this.bet=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var nonce,challenges;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return web3.eth.getTransactionCount(_this.account);case 2:nonce=_context5.sent;challenges='0x'+_this.state.challenges[0].toLowerCase()+_this.state.challenges[1].toLowerCase();_this.lotteryContract.methods.betAndDistribute(challenges).send({from:_this.account,value:5000000000000000,gas:300000,nonce:nonce}).on('transactionHash',function(hash){console.log(hash);});case 5:case\"end\":return _context5.stop();}}},_callee5);}));_this.onClickCard=function(_Character){_this.setState({challenges:[_this.state.challenges[1],_Character]});};_this.getCard=function(_Character,_cardStyle){var _card='';if(_Character==='A'){_card='🂡';}if(_Character==='B'){_card='🂱';}if(_Character==='C'){_card='🃁';}if(_Character==='D'){_card='🃑';}return/*#__PURE__*/_jsx(\"button\",{className:_cardStyle,onClick:function onClick(){_this.onClickCard(_Character);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"card-test\"}),/*#__PURE__*/_jsx(\"p\",{className:\"card-test text-center\",style:{fontSize:300},children:_card}),/*#__PURE__*/_jsx(\"p\",{className:\"card-test\"})]})});};_this.state={betRecords:[],winRecords:[],failRecords:[],pot:'0',challenges:['A','B'],finalRecords:[{bettor:'0xabcd',index:'0',challenges:'ab',answer:'ab',targetBlockAnswer:'10',pot:'0'}]};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this.initWeb3();case 2:_context6.next=4;return this.pollData();case 4:case\"end\":return _context6.stop();}}},_callee6,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"jumbotron\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Current Pot : \",this.state.pot]}),/*#__PURE__*/_jsx(\"p\",{children:\"Lottery\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your Bet\"}),/*#__PURE__*/_jsxs(\"p\",{children:[this.state.challenges[0],\" \",this.state.challenges[1]]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-group\",children:[this.getCard('A','card bg-primary'),this.getCard('B','card bg-warning'),this.getCard('C','card bg-danger'),this.getCard('D','card bg-success')]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-lg\",onClick:this.bet,children:\"BET!\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-dark table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Index\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Challenges\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Answer\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Pot\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Answer Block Number\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.state.finalRecords.map(function(record,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"0\"}),/*#__PURE__*/_jsx(\"td\",{children:\"0\"}),/*#__PURE__*/_jsx(\"td\",{children:\"0\"}),/*#__PURE__*/_jsx(\"td\",{children:\"0\"}),/*#__PURE__*/_jsx(\"td\",{children:\"0\"}),/*#__PURE__*/_jsx(\"td\",{children:\"0\"}),/*#__PURE__*/_jsx(\"td\",{children:\"0\"})]},index);})})]})})]});}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/micka/Desktop/Crypto Project/lottery-react-app/src/App.js"],"names":["Web3","Component","web3","givenProvider","lotteryAddress","lotteryABI","App","props","pollData","getPot","getBetEvents","initWeb3","window","ethereum","enable","console","log","currentProvider","eth","getAccounts","accounts","account","lotteryContract","Contract","methods","owner","call","pot","potString","utils","fromWei","toString","setState","records","getPastEvents","fromBlock","toBlock","events","i","length","record","index","parseInt","returnValues","bettor","betBlockNumber","blockNumber","targetBlockNumber","answerBlockNumber","challenges","win","answer","unshift","bet","getTransactionCount","nonce","state","toLowerCase","betAndDistribute","send","from","value","gas","on","hash","onClickCard","_Character","getCard","_cardStyle","_card","fontSize","betRecords","winRecords","failRecords","finalRecords","targetBlockAnswer","map"],"mappings":"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","sourcesContent":["import './App.css';\nimport Web3 from 'web3';\nimport { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.css'\n\nvar web3 = new Web3(Web3.givenProvider || \"ws://localhost:7545\");\n\nlet lotteryAddress = '0x69bF039ED3c1Be51a491B77855245735faa7C365'\nlet lotteryABI =[ { \"inputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"constructor\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"BET\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"answer\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"DRAW\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"answer\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"FAIL\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"REFUND\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"answer\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"WIN\", \"type\": \"event\" }, { \"constant\": true, \"inputs\": [], \"name\": \"answerForTest\", \"outputs\": [ { \"internalType\": \"bytes32\", \"name\": \"\", \"type\": \"bytes32\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"owner\", \"outputs\": [ { \"internalType\": \"address payable\", \"name\": \"\", \"type\": \"address\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" } ], \"name\": \"betAndDistribute\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"result\", \"type\": \"bool\" } ], \"payable\": true, \"stateMutability\": \"payable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"getPot\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"pot\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" } ], \"name\": \"bet\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"result\", \"type\": \"bool\" } ], \"payable\": true, \"stateMutability\": \"payable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [], \"name\": \"distribute\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"bytes32\", \"name\": \"answer\", \"type\": \"bytes32\" } ], \"name\": \"setAnswerForTest\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"result\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"internalType\": \"bytes32\", \"name\": \"answer\", \"type\": \"bytes32\" } ], \"name\": \"isMatch\", \"outputs\": [ { \"internalType\": \"enum Lottery.BettingResult\", \"name\": \"\", \"type\": \"uint8\" } ], \"payable\": false, \"stateMutability\": \"pure\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" } ], \"name\": \"getBetInfo\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" }, { \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" } ]\n\nclass App extends Component{\n\n  constructor(props){\n    super(props);\n\n    this.state={\n      betRecords:[],\n      winRecords:[],\n      failRecords:[],\n      pot:'0',\n      challenges:['A','B'],\n      finalRecords:[{\n        bettor:'0xabcd',\n        index:'0',\n        challenges:'ab',\n        answer:'ab',\n        targetBlockAnswer:'10',\n        pot:'0'\n      }]\n    }\n  }\n\n  async componentDidMount (){\n    await this.initWeb3();\n    \n    await this.pollData();\n    /*let account = await web3.eth.getAccounts();\n    console.log(account);\n    let balance = await web3.eth.getBalance(account[0]);\n    console.log(balance);*/\n    //let accounts = await this.web3.eth.getAccounts();\n    //console.log(accounts);\n  }\n  pollData = async ()=>{\n    await this.getPot();\n    await this.getBetEvents();\n  }\n  initWeb3 = async () =>{\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n      try {\n          // Request account access if needed\n          await window.ethereum.enable();\n          // Acccounts now exposed\n          // this.web3.eth.sendTransaction({/* ... */});\n      } catch (error) {\n          // User denied account access...\n          console.log(`User denied account access: ${error}`)\n      }\n    }\n    // Legacy dapp browsers...\n    else if (window.web3) {\n        console.log('Legacy Mode')\n        window.web3 = new Web3(Web3.currentProvider);\n        // Acccounts always exposed\n        // this.web3.eth.sendTransaction({/* ... */});\n    }\n    // Non-dapp browsers...\n    else {\n        console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');\n    }\n    let accounts = await web3.eth.getAccounts();\n    this.account = accounts[0];\n    console.log(this.account);\n    this.lotteryContract = new web3.eth.Contract(lotteryABI,lotteryAddress);\n    let owner = await this.lotteryContract.methods.owner().call();\n    // to test, bet 0.05 eth\n    //this.lotteryContract.methods.betAndDistribute('0xcd').send({from: this.account, value:5000000000000000, gas: 300000})\n  }\n  getPot = async()=>{\n    let pot = await this.lotteryContract.methods.getPot().call()\n    let potString = web3.utils.fromWei(pot.toString(), 'ether');\n    this.setState({pot:potString})\n  }\n\n  getBetEvents = async()=>{\n    const records = [];\n    let events = await this.lotteryContract.getPastEvents('BET',{fromBlock:0, toBlock:'latest'});\n    for (let i=0; i<events.length;i++){\n      const record={}\n      record.index = parseInt(events[i].returnValues.index, 10).toString();\n      record.bettor = events[i].returnValues.bettor;\n      record.betBlockNumber = events[i].blockNumber;\n      record.targetBlockNumber = events[i].returnValues.answerBlockNumber.toString();\n      record.challenges=events[i].returnValues.challenges;\n      record.win = \"Not Revealed\";\n      record.answer = '0x00'\n      records.unshift(record);\n\n    }\n    console.log(records);\n  }\n  \n  bet = async()=>{\n    let nonce = await web3.eth.getTransactionCount(this.account);\n    let challenges = '0x'+this.state.challenges[0].toLowerCase()+this.state.challenges[1].toLowerCase();\n    this.lotteryContract.methods.betAndDistribute(challenges).send({from: this.account, value:5000000000000000, gas: 300000, nonce:nonce})\n    .on('transactionHash', (hash)=>{\n      console.log(hash)\n    })\n  }\n  onClickCard = (_Character)=>{\n    this.setState({\n      challenges:[this.state.challenges[1],_Character]\n    })\n  }\n  getCard = (_Character, _cardStyle)=>{\n    let _card = '';\n    if (_Character==='A'){\n      _card = '🂡'\n    }\n    if (_Character==='B'){\n      _card = '🂱'\n    }\n    if (_Character==='C'){\n      _card = '🃁'\n    }\n    if (_Character==='D'){\n      _card = '🃑'\n    }\n\n    return (\n      <button className={_cardStyle} onClick={()=>{\n        this.onClickCard(_Character)\n      }}> \n        <div className='card-body text-center'>\n            <p className='card-test'></p>\n            <p className='card-test text-center' style={{fontSize:300}}>{_card}</p>\n            <p className='card-test'></p>\n        </div>\n      </button>\n    )\n  }\n\n  render(){\n      return (\n        <div className=\"App\">\n          {/* Header - Pot, Betting characters */}\n          <div className=\"container\">\n            <div className=\"jumbotron\">\n              <h1>Current Pot : {this.state.pot}</h1>\n              <p>Lottery</p>\n              <p>Your Bet</p>\n              <p>{this.state.challenges[0]} {this.state.challenges[1]}</p>\n            </div>\n          </div>\n\n          <div className='container'>\n            <div className='card-group'>\n              {this.getCard('A','card bg-primary')}\n              {this.getCard('B','card bg-warning')}\n              {this.getCard('C','card bg-danger')}\n              {this.getCard('D','card bg-success')}\n            </div> \n          </div>\n          <br></br>\n          <div>\n            <button className='btn btn-danger btn-lg' onClick={this.bet}>BET!</button>\n          </div>\n          <br></br>\n          <div className='container'>\n            <table className='table table-dark table-striped'>\n              <thead>\n                <tr>\n                  <th>Index</th>\n                  <th>Address</th>\n                  <th>Challenges</th>\n                  <th>Answer</th>\n                  <th>Pot</th>\n                  <th>Status</th>\n                  <th>Answer Block Number</th>\n                </tr>\n              </thead>\n              <tbody>\n                {\n                  this.state.finalRecords.map((record, index) => {\n                    return (\n                      <tr key={index}>\n                        <td>0</td>\n                        <td>0</td> \n                        <td>0</td>      \n                        <td>0</td>      \n                        <td>0</td>      \n                        <td>0</td>      \n                        <td>0</td>           \n                      </tr>\n                    )\n                  })\n                }\n              </tbody>\n            </table>\n          </div>\n        </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}